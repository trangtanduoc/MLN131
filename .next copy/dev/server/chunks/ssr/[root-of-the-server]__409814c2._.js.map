{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,oOAAO,EAAC,IAAA,8LAAI,EAAC;AACtB"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/components/timeline.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { ChevronDown, ChevronUp, Flag, TrendingUp, Globe, Building2, FileText, Rocket } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { XCircle, ArrowRight, CheckCircle } from \"lucide-react\"\nimport Image from \"next/image\"\nconst timelineData = [\n  {\n    id: 1,\n    year: \"1996 - 2000\",\n    title: \"Đại hội VIII (1996)\",\n    color: \"bg-cyan-500\",\n    borderColor: \"border-cyan-500\",\n    textColor: \"text-cyan-600\",\n    icon: Flag,\n    image: './back8.jpg',\n    summary: \"Đẩy mạnh công nghiệp hóa – hiện đại hóa, thừa nhận kinh tế nhiều thành phần\",\n    content: {\n      image: \"./daihoi8.png\",\n      background: {\n        domestic: [\n          \"Sau Đổi Mới (1986), kinh tế tăng trưởng nhưng năng suất thấp\",\n          \"Doanh nghiệp nhà nước kém hiệu quả, hạ tầng yếu\",\n          \"Việt Nam vẫn là nước nghèo, nguy cơ tụt hậu rõ ràng\",\n        ],\n        international: [\n          \"Toàn cầu hóa tăng mạnh\",\n          \"Các nước ASEAN phát triển nhanh\",\n          \"Chiến tranh Lạnh kết thúc → trật tự thế giới thay đổi\",\n        ],\n      },\n      oldPolicies: [\n        \"Bao cấp trực tiếp cho doanh nghiệp\",\n        \"Quản lý kinh tế bằng mệnh lệnh hành chính\",\n        \"Coi kinh tế nhà nước là gần như duy nhất\",\n      ],\n      newPolicies: [\n        \"Đẩy mạnh công nghiệp hóa – hiện đại hóa\",\n        \"Thừa nhận kinh tế nhiều thành phần\",\n        \"Mở cửa thu hút đầu tư nước ngoài\",\n      ],\n      events:\n        \"1997–1998: Khủng hoảng tài chính châu Á - Việt Nam bị ảnh hưởng nhẹ hơn nhưng xuất khẩu giảm, đầu tư nước ngoài chững lại\",\n    },\n  },\n  {\n    id: 2,\n    year: \"2001 - 2005\",\n    title: \"Đại hội IX (2001)\",\n    color: \"bg-amber-500\",\n    borderColor: \"border-amber-500\",\n    textColor: \"text-amber-600\",\n    icon: TrendingUp,\n    summary: \"Chủ động hội nhập kinh tế quốc tế, chuẩn bị gia nhập WTO\",\n    content: {\n      background: {\n        domestic: [\n          \"Kinh tế đã tăng nhưng chất lượng thấp\",\n          \"Luật lệ chưa theo kịp thị trường\",\n          \"Doanh nghiệp tư nhân bị kìm\",\n        ],\n        international: [\"Toàn cầu hóa mạnh\", \"Trung Quốc vào WTO (2001)\", \"Cạnh tranh khu vực gay gắt\"],\n      },\n      oldPolicies: ['Tư duy \"mở cửa có kiểm soát quá chặt\"', \"Phân biệt đối xử doanh nghiệp nhà nước – tư nhân\"],\n      newPolicies: [\n        \"Chủ động hội nhập kinh tế quốc tế\",\n        \"Hoàn thiện thể chế kinh tế thị trường\",\n        \"Khuyến khích khu vực tư nhân\",\n      ],\n      events: \"Việt Nam ký nhiều hiệp định thương mại → Tạo áp lực cải cách luật pháp, minh bạch hóa\",\n    },\n  },\n  {\n    id: 3,\n    year: \"2006 - 2010\",\n    title: \"Đại hội X (2006)\",\n    color: \"bg-rose-500\",\n    borderColor: \"border-rose-500\",\n    textColor: \"text-rose-600\",\n    icon: Globe,\n    summary: \"Việt Nam gia nhập WTO (2007), cải cách hành chính, phòng chống tham nhũng\",\n    content: {\n      background: {\n        domestic: [\"Chính sách cũ không đủ minh bạch\", \"Tham nhũng, bộ máy cồng kềnh lộ rõ\"],\n        international: [\n          \"2007: Việt Nam gia nhập WTO - mốc quan trọng\",\n          \"Thị trường rộng mở, thu hút đầu tư mạnh\",\n          \"Doanh nghiệp yếu bị đào thải, cạnh tranh gay gắt\",\n        ],\n      },\n      oldPolicies: [\"Chính sách cũ không đủ minh bạch\", \"Bộ máy cồng kềnh\"],\n      newPolicies: [\"Cải cách hành chính\", \"Phòng chống tham nhũng\", \"Nâng cao hiệu quả quản lý nhà nước\"],\n      events: \"2007: Việt Nam chính thức gia nhập WTO - mở ra cơ hội và thách thức mới\",\n    },\n  },\n  {\n    id: 4,\n    year: \"2011 - 2015\",\n    title: \"Đại hội XI (2011)\",\n    color: \"bg-slate-700\",\n    borderColor: \"border-slate-700\",\n    textColor: \"text-slate-700\",\n    icon: Building2,\n    summary: \"Tái cơ cấu nền kinh tế: ngân hàng, doanh nghiệp nhà nước, đầu tư công\",\n    content: {\n      background: {\n        domestic: [\"Tăng trưởng nóng → lạm phát\", \"Nợ xấu ngân hàng\", \"Đầu tư công dàn trải\"],\n        international: [\"Khủng hoảng kinh tế toàn cầu 2008 để lại hậu quả nặng\"],\n      },\n      oldPolicies: [\"Mô hình tăng trưởng dựa vào đầu tư công dàn trải\", \"Quản lý ngân hàng lỏng lẻo\"],\n      newPolicies: [\"Tái cơ cấu ngân hàng\", \"Tái cơ cấu doanh nghiệp nhà nước\", \"Tái cơ cấu đầu tư công\"],\n      events: \"Hậu quả khủng hoảng 2008 buộc Việt Nam phải tái cơ cấu toàn diện nền kinh tế\",\n    },\n  },\n  {\n    id: 5,\n    year: \"2016 - 2020\",\n    title: \"Đại hội XII (2016)\",\n    color: \"bg-orange-500\",\n    borderColor: \"border-orange-500\",\n    textColor: \"text-orange-600\",\n    icon: FileText,\n    summary: \"Chỉnh đốn Đảng, cải cách thể chế, ứng phó Covid-19\",\n    content: {\n      background: {\n        domestic: [\n          \"Đặt nền móng cho cải cách thể chế, chỉnh đốn Đảng\",\n          \"Nghị quyết TW4 về ngăn chặn suy thoái, tự diễn biến\",\n        ],\n        international: [\"2020: Đại dịch Covid-19 bùng phát\", \"Tác động mạnh đến kinh tế – xã hội toàn cầu\"],\n      },\n      oldPolicies: [\"Mô hình tăng trưởng cũ cần đổi mới\"],\n      newPolicies: [\n        \"NQ 10-NQ/TW: Phát triển kinh tế tư nhân\",\n        \"NQ 12-NQ/TW: Đổi mới doanh nghiệp nhà nước\",\n        \"Chiến lược phát triển kinh tế biển (NQ 36)\",\n        \"Cải cách tiền lương và bảo hiểm xã hội\",\n      ],\n      events:\n        \"10/2018: Tổng Bí thư Nguyễn Phú Trọng giữ chức Chủ tịch nước. 2020: Việt Nam ứng phó thành công Covid-19\",\n    },\n  },\n  {\n    id: 6,\n    year: \"2021 - Nay\",\n    title: \"Đại hội XIII (2021)\",\n    color: \"bg-emerald-500\",\n    borderColor: \"border-emerald-500\",\n    textColor: \"text-emerald-600\",\n    icon: Rocket,\n    summary: \"Tầm nhìn 2030-2045, chuyển đổi số, phát triển bền vững\",\n    content: {\n      background: {\n        domestic: [\"Định hình tư duy phát triển dài hạn\", \"Đẩy mạnh chuyển đổi số quốc gia\"],\n        international: [\"Hậu Covid-19, kinh tế thế giới phục hồi\", \"Biến đổi khí hậu trở thành vấn đề toàn cầu\"],\n      },\n      oldPolicies: [\"Cần chuyển đổi từ mô hình truyền thống sang kinh tế số\"],\n      newPolicies: [\n        \"Tầm nhìn phát triển đến 2030 và 2045\",\n        \"Chuyển đổi xanh, ứng phó biến đổi khí hậu\",\n        \"Phát triển kinh tế số, xã hội số\",\n        \"Phát triển nguồn nhân lực chất lượng cao\",\n      ],\n      events:\n        \"2022: Việt Nam mở cửa hoàn toàn nền kinh tế. 2024: Tiếp tục nâng cao vị thế quốc tế, hướng tới nước phát triển 2045\",\n    },\n  },\n]\n\nexport function Timeline() {\n  const [selectedItem, setSelectedItem] = useState<typeof timelineData[number] | null>(null)\n\n  return (\n    <div className=\"relative mx-auto max-w-7xl px-4\">\n      {/* Start Label */}\n      <div className=\"mb-8 flex justify-center\">\n        <div className=\"rounded-lg border-2 border-primary bg-background px-6 py-2 font-bold text-primary shadow-md\">\n          BẮT ĐẦU\n        </div>\n      </div>\n\n      {/* Timeline Line */}\n      <div className=\"absolute left-1/2 top-20 bottom-20 w-1 -translate-x-1/2 bg-gradient-to-b from-cyan-500 via-amber-500 to-emerald-500\" />\n\n      {/* Timeline Items */}\n      <div className=\"relative space-y-12\">\n        {timelineData.map((item, index) => {\n          const isLeft = index % 2 === 0\n          const Icon = item.icon\n\n          return (\n            <div key={item.id} className=\"relative\">\n              {/* Center Circle */}\n              <div className=\"absolute left-1/2 top-0 z-10 -translate-x-1/2\">\n                <div\n                  className={cn(\n                    \"flex h-12 w-12 items-center justify-center rounded-full border-4 bg-background\",\n                    item.borderColor,\n                  )}\n                >\n                  <Icon className={cn(\"h-5 w-5\", item.textColor)} />\n                </div>\n              </div>\n\n              {/* Content Card */}\n              <div className={cn(\"relative w-[calc(50%-3rem)]\", isLeft ? \"mr-auto pr-4\" : \"ml-auto pl-4\")}>\n                {/* Dotted Line */}\n                <div\n                  className={cn(\n                    \"absolute top-6 h-0.5 w-8 border-t-2 border-dashed border-muted-foreground/50\",\n                    isLeft ? \"right-0\" : \"left-0\",\n                  )}\n                />\n\n                <div\n                  className={cn(\n                    \"cursor-pointer rounded-xl border bg-card p-5 shadow-lg transition-all hover:shadow-xl\",\n                  )}\n                  onClick={() => setSelectedItem(item)}\n                >\n                  {/* Year Badge */}\n                  <div\n                    className={cn(\"mb-3 inline-block rounded-full px-4 py-1 text-sm font-bold text-white\", item.color)}\n                  >\n                    {item.year}\n                  </div>\n\n                  <div>\n                    <img src={item.image} alt={item.title} className=\"mb-4 h-40 w-full rounded-lg object-cover\" />\n                  </div>\n\n                  {/* Title */}\n                  <h3 className={cn(\"mb-2 text-lg font-bold\", item.textColor)}>{item.title}</h3>\n\n                  {/* Summary */}\n                  <p className=\"mb-3 text-sm text-muted-foreground\">{item.summary}</p>\n                </div>\n              </div>\n            </div>\n          )\n        })}\n      </div>\n\n      {selectedItem && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\n          <div className=\"relative grid max-h-[100100vh] w-full max-w-6xl grid-cols-1 overflow-hidden rounded-xl bg-background shadow-xl md:grid-cols-[400px_1fr]\">\n            <div className=\"relative hidden md:block\">\n              <Image\n                src={selectedItem.content.image || \"/fallback-image.png\"}\n                alt={selectedItem.title}\n                fill\n                className=\"object-fit\"\n                priority\n              />\n              <div className=\"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent\" />\n            </div>\n\n            {/* ===== RIGHT: CONTENT ===== */}\n            <div className=\"relative max-h-[90vh] overflow-y-auto p-6\">\n\n              {/* Close */}\n              <button\n                className=\"absolute right-4 top-4 text-muted-foreground hover:text-foreground cursor-pointer text-2xl font-bold\"\n                onClick={() => setSelectedItem(null)}\n              >\n                ✕\n              </button>\n\n              {/* Header */}\n              <div className=\"mb-6\">\n                <span\n                  className={cn(\n                    \"inline-block rounded-full px-4 py-1 text-sm font-bold text-white\",\n                    selectedItem.color\n                  )}\n                >\n                  {selectedItem.year}\n                </span>\n                <h2 className=\"mt-2 text-2xl font-bold\">{selectedItem.title}</h2>\n                <p className=\"mt-1 text-muted-foreground\">{selectedItem.summary}</p>\n              </div>\n\n              <div className=\"space-y-6\">\n                {/* Bối cảnh */}\n                {/* Bối cảnh */}\n                <div className=\"rounded-xl border bg-muted/30 p-4\">\n                  <h3 className=\"mb-3 font-bold\">Bối cảnh</h3>\n                  {/* Thay đổi: md:grid-cols-2 được giữ nguyên */}\n                  <div className=\"grid gap-4 md:grid-cols-[1fr_auto_1fr]\">\n\n                    {/* ===== CỘT 1: TRONG NƯỚC ===== */}\n                    <div>\n                      <p className=\"inline-block rounded-full bg-primary/10 px-3 py-1 text-xs font-semibold uppercase tracking-wider text-primary\">\n                        Trong nước\n                      </p>\n                      <ul className=\"mt-2 space-y-2 text-sm\">\n                        {selectedItem.content.background.domestic.map((p, i) => (\n                          <li key={i}>• {p}</li>\n                        ))}\n                      </ul>\n                    </div>\n\n                    {/* ===== DIVIDER (NGĂN CÁCH) ===== */}\n                    <div className=\"hidden md:block\">\n                      <div className=\"h-full w-px bg-gray-300 dark:bg-gray-700 mx-2\" aria-hidden=\"true\" />\n                    </div>\n\n                    {/* ===== CỘT 2: QUỐC TẾ ===== */}\n                    <div>\n                      <p className=\"inline-block rounded-full bg-primary/10 px-3 py-1 text-xs font-semibold uppercase tracking-wider text-primary\">\n                        Quốc tế\n                      </p>\n                      <ul className=\"mt-2 space-y-2 text-sm\">\n                        {selectedItem.content.background.international.map((p, i) => (\n                          <li key={i}>• {p}</li>\n                        ))}\n                      </ul>\n                    </div>\n\n                  </div>\n                </div>\n\n                {/* Chuyển đổi chính sách */}\n                <div>\n                  <h2 className=\"mb-4 text-base font-bold\">Chuyển đổi chính sách</h2>\n\n                  <div className=\"grid gap-4 md:grid-cols-[1fr_auto_1fr]\">\n                    {/* Chính sách cũ */}\n                    <div className=\"rounded-xl border border-destructive/30 bg-destructive/5 p-4\">\n                      <h3 className=\"mb-2 font-semibold text-destructive\">Chính sách cũ</h3>\n                      <ul className=\"space-y-1 text-sm\">\n                        {selectedItem.content.oldPolicies.map((p, i) => (\n                          <li key={i} className=\"flex gap-2\">\n                            <XCircle className=\"mt-0.5 h-3.5 w-3.5 text-destructive\" />\n                            <span>{p}</span>\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n\n                    {/* Arrow */}\n                    <div className=\"hidden md:flex items-center justify-center\">\n                      <ArrowRight className=\"h-8 w-8 text-muted-foreground\" />\n                    </div>\n\n                    {/* Chính sách mới */}\n                    <div className=\"rounded-xl border border-emerald-500/30 bg-emerald-500/5 p-4\">\n                      <h3 className=\"mb-2 font-semibold text-emerald-600\">Chính sách mới</h3>\n                      <ul className=\"space-y-1 text-sm\">\n                        {selectedItem.content.newPolicies.map((p, i) => (\n                          <li key={i} className=\"flex gap-2\">\n                            <CheckCircle className=\"mt-0.5 h-3.5 w-3.5 text-emerald-500\" />\n                            <span>{p}</span>\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Sự kiện */}\n                <div>\n                  <h3 className=\"mb-2 font-bold\">Sự kiện nổi bật</h3>\n                  <p className=\"rounded-lg bg-muted p-3 text-sm\">\n                    {selectedItem.content.events}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n\n\n      {/* End Label */}\n      <div className=\"mt-8 flex justify-center\">\n        <div className=\"rounded-lg border-2 border-emerald-500 bg-background px-6 py-2 font-bold text-emerald-600 shadow-md\">\n          HIỆN TẠI\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 771, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/components/home.tsx"],"sourcesContent":["import { Timeline } from \"@/components/timeline\"\n\nexport function Home() {\n  return (\n    <div className=\"space-y-12\">\n      {/* Introduction Section */}\n      <section className=\"mx-auto max-w-4xl text-center\">\n        <h1 className=\"mb-6 text-3xl font-bold text-foreground md:text-4xl\">\n          Lịch sử Việt Nam từ Đại hội VIII đến nay\n        </h1>\n        <p className=\"text-lg leading-relaxed text-muted-foreground\">\n          Việt Nam sau khi giành độc lập và thống nhất đất nước bước vào giai đoạn xây dựng và phát triển. Từ Đại hội\n          VIII (1996) đến nay, Đảng Cộng sản Việt Nam đã từng bước đổi mới tư duy lãnh đạo, định hình mô hình phát triển\n          kinh tế – xã hội, và hội nhập sâu rộng với thế giới.\n        </p>\n      </section>\n\n      {/* Timeline Section */}\n      <section className=\"mx-auto max-w-7xl\">\n        <Timeline />\n      </section>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAEO,SAAS;IACd,qBACE,8WAAC;QAAI,WAAU;;0BAEb,8WAAC;gBAAQ,WAAU;;kCACjB,8WAAC;wBAAG,WAAU;kCAAsD;;;;;;kCAGpE,8WAAC;wBAAE,WAAU;kCAAgD;;;;;;;;;;;;0BAQ/D,8WAAC;gBAAQ,WAAU;0BACjB,cAAA,8WAAC,mIAAQ;;;;;;;;;;;;;;;;AAIjB"}},
    {"offset": {"line": 831, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/components/header.tsx"],"sourcesContent":["\"use client\"\n\nimport { cn } from \"@/lib/utils\"\n\ninterface HeaderProps {\n  activeTab: \"home\" | \"game\"\n  setActiveTab: (tab: \"home\" | \"game\") => void\n}\n\nexport function Header({ activeTab, setActiveTab }: HeaderProps) {\n  return (\n    <header className=\"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n      <div className=\"container mx-auto flex h-16 items-center justify-between px-4\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-xl font-bold text-foreground\">Nhóm 8 - VNR202</span>\n        </div>\n\n        <nav className=\"flex items-center gap-1\">\n          <button\n            onClick={() => setActiveTab(\"home\")}\n            className={cn(\n              \"px-4 py-2 rounded-lg font-medium transition-colors hover:cursor-pointer\",\n              activeTab === \"home\"\n                ? \"bg-primary text-primary-foreground\"\n                : \"text-muted-foreground hover:text-foreground hover:bg-muted\",\n            )}\n          >\n            Home\n          </button>\n          <button\n            onClick={() => setActiveTab(\"game\")}\n            className={cn(\n              \"px-4 py-2 rounded-lg font-medium transition-colors hover:cursor-pointer\",\n              activeTab === \"game\"\n                ? \"bg-primary text-primary-foreground\"\n                : \"text-muted-foreground hover:text-foreground hover:bg-muted\",\n            )}\n          >\n            Game\n          </button>\n        </nav>\n      </div>\n    </header>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASO,SAAS,OAAO,EAAE,SAAS,EAAE,YAAY,EAAe;IAC7D,qBACE,8WAAC;QAAO,WAAU;kBAChB,cAAA,8WAAC;YAAI,WAAU;;8BACb,8WAAC;oBAAI,WAAU;8BACb,cAAA,8WAAC;wBAAK,WAAU;kCAAoC;;;;;;;;;;;8BAGtD,8WAAC;oBAAI,WAAU;;sCACb,8WAAC;4BACC,SAAS,IAAM,aAAa;4BAC5B,WAAW,IAAA,kHAAE,EACX,2EACA,cAAc,SACV,uCACA;sCAEP;;;;;;sCAGD,8WAAC;4BACC,SAAS,IAAM,aAAa;4BAC5B,WAAW,IAAA,kHAAE,EACX,2EACA,cAAc,SACV,uCACA;sCAEP;;;;;;;;;;;;;;;;;;;;;;;AAOX"}},
    {"offset": {"line": 904, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,kPAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,4SAAI,GAAG;IAE9B,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 963, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8WAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 988, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1090, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/config/firebaseConfig.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID,\n};\n\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\nconst analytics = typeof window !== \"undefined\" ? getAnalytics(app) : null;\n\nexport { app as firebaseApp, analytics };"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,WAAW;IACX,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,aAAa;AACf;AAEA,MAAM,MAAM,CAAC,IAAA,0OAAO,IAAG,MAAM,GAAG,IAAA,gPAAa,EAAC,kBAAkB,IAAA,yOAAM;AACtE,MAAM,YAAY,sCAAgC,0BAAoB"}},
    {"offset": {"line": 1166, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/utils/firebase.ts"],"sourcesContent":["import { firebaseApp } from \"@/config/firebaseConfig\"\nimport { getDatabase, ref, set, update, get, onValue, remove } from \"firebase/database\"\n\nconst db = getDatabase(firebaseApp)\n// Random 6 ký tự\nexport const generateRoomCode = (): string => {\n    return Math.random().toString(36).substring(2, 8).toUpperCase()\n  }\n  \n  // Random playerId\n  export const generatePlayerId = (): string => {\n    return crypto.randomUUID()\n  }\n\n  export const endGame = async (roomCode: string) => {\n    await update(ref(db, `rooms/${roomCode}`), {\n      status: \"closed\",\n      gameStarted: false,\n      gameEnded: true,\n    });\n  };\n\n  export const getRoomStatus = async (roomCode: string): Promise<{ status: \"open\" | \"closed\"; gameStarted?: boolean } | null> => {\n    const roomRef = ref(db, `rooms/${roomCode}`);\n    const snap = await get(roomRef);\n    if (!snap.exists()) return null;\n    return { status: snap.val().status, gameStarted: snap.val().gameStarted || false };\n  };\n  \n  // Realtime listener cho trạng thái phòng\n  export const onRoomStatusUpdate = (\n    roomCode: string,\n    callback: (status: { status: string; gameStarted: boolean }) => void\n  ) => {\n    const roomRef = ref(db, `rooms/${roomCode}`);\n    const unsubscribe = onValue(roomRef, (snap) => {\n      const room = snap.val();\n      callback({ status: room?.status || \"closed\", gameStarted: room?.gameStarted || false });\n    });\n  \n    return unsubscribe; // ✅ trả về function\n  };\n  \n  // --- 2.1 Tạo phòng ---\n  export const createRoom = async () => {\n    const roomCode = generateRoomCode();\n    const adminKey = generatePlayerId();\n    await set(ref(db, `rooms/${roomCode}`), {\n      adminKey,\n      status: \"open\",\n      gameStarted: false,\n      createdAt: Date.now(),\n      players: {}\n    });\n    return { roomCode, adminKey };\n  };\n  \n  export const startGame = async (roomCode: string) => {\n    await update(ref(db, `rooms/${roomCode}`), { gameStarted: true });\n  };\n  \n  // --- 2.2 Tham gia phòng ---\n  export const joinRoom = async (roomCode: string, playerName: string) => {\n    const playerId = generatePlayerId()\n    await set(ref(db, `rooms/${roomCode}/players/${playerId}`), {\n      name: playerName,\n      score: 0,\n      joinedAt: Date.now()\n    })\n    return playerId\n  }\n  \n  // --- 2.3 Kết thúc phòng (admin) ---\n  export const closeRoom = async (roomCode: string) => {\n    await update(ref(db, `rooms/${roomCode}`), {\n      status: \"closed\"\n    })\n  }\n  \n  // --- 2.4 Update điểm ---\n  // cộng/trừ điểm\n  export const updateScore = async (\n    roomCode: string,\n    playerId: string,\n    delta: number\n  ) => {\n    const playerRef = ref(db, `rooms/${roomCode}/players/${playerId}`)\n    const snap = await get(playerRef)\n    if (!snap.exists()) return\n    const currentScore = snap.val().score || 0\n    await update(playerRef, { score: Math.max(0, currentScore + delta) })\n  }\n  \n  export const multiplyScore = async (\n    roomCode: string,\n    playerId: string,\n    factor: number = 2\n  ) => {\n    const playerRef = ref(db, `rooms/${roomCode}/players/${playerId}`)\n    const snap = await get(playerRef)\n    if (!snap.exists()) return\n    const currentScore = snap.val().score || 0\n    await update(playerRef, { score: currentScore * factor })\n  }\n  \n  // mất toàn bộ điểm\n  export const resetScore = async (roomCode: string, playerId: string) => {\n    await update(ref(db, `rooms/${roomCode}/players/${playerId}`), { score: 0 })\n  }\n  \n  type StealType = \"STEAL_20\" | \"STEAL_50\"\n\n  export const stealScore = async (\n    roomCode: string,\n    thiefId: string,\n    victimId: string,\n    type: StealType\n  ) => {\n    const playersRef = ref(db, `rooms/${roomCode}/players`)\n    const snap = await get(playersRef)\n    if (!snap.exists()) return\n  \n    const players = snap.val()\n    if (!players[thiefId] || !players[victimId]) return\n  \n    const victimScore = players[victimId].score || 0\n    if (victimScore <= 0) return\n  \n    const percent = type === \"STEAL_20\" ? 0.2 : 0.5\n    const stolen = Math.floor(victimScore * percent)\n  \n    players[thiefId].score += stolen\n    players[victimId].score -= stolen\n  \n    await update(playersRef, {\n      [thiefId]: players[thiefId],\n      [victimId]: players[victimId],\n    })\n  }\n\n  export const swapScore = async (\n    roomCode: string,\n    playerAId: string,\n    playerBId: string\n  ) => {\n    const playersRef = ref(db, `rooms/${roomCode}/players`)\n    const snap = await get(playersRef)\n    if (!snap.exists()) return\n  \n    const players = snap.val()\n    if (!players[playerAId] || !players[playerBId]) return\n  \n    // hoán đổi điểm\n    const tempScore = players[playerAId].score || 0\n    players[playerAId].score = players[playerBId].score || 0\n    players[playerBId].score = tempScore\n  \n    await update(playersRef, {\n      [playerAId]: players[playerAId],\n      [playerBId]: players[playerBId],\n    })\n  }\n  \n  // --- 2.5 Lắng nghe realtime leaderboard (admin) ---\n  export const onLeaderboardUpdate = (\n    roomCode: string,\n    callback: (players: { name: string; score: number }[]) => void\n  ) => {\n    const roomRef = ref(db, `rooms/${roomCode}/players`);\n    const unsubscribe = onValue(roomRef, (snap) => {\n      const players = snap.val() || {};\n      const leaderboard = Object.values(players)\n        .map((p: any) => ({ name: p.name, score: p.score }))\n        .sort((a, b) => b.score - a.score);\n      callback(leaderboard);\n    });\n  \n    return unsubscribe; // ✅ trả về function\n  };\n  \n\n  export const getPlayerScore = async (\n    roomCode: string,\n    playerId: string\n  ): Promise<number | null> => {\n    const playerRef = ref(db, `rooms/${roomCode}/players/${playerId}`)\n    const snap = await get(playerRef)\n    if (!snap.exists()) return null\n    return snap.val().score || 0\n  }"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1350, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/components/game-card.tsx"],"sourcesContent":["\"use client\";\nimport { CardType } from \"@/types/card\";\n\ninterface GameCardProps {\n  type: CardType;\n  flipped: boolean;\n  onClick: () => void;\n}\n\nexport default function GameCard({ type, flipped, onClick }: GameCardProps) {\n  return (\n    <div\n      onClick={onClick}\n      className=\"w-32 h-44 cursor-pointer perspective\"\n    >\n      <div\n        className={`relative w-full h-full transition-transform duration-500 transform-style-preserve-3d ${\n          flipped ? \"rotate-y-180\" : \"\"\n        }`}\n      >\n        {/* Front */}\n        <div className=\"absolute inset-0 bg-blue-500 rounded-xl flex items-center justify-center backface-hidden text-white text-3xl font-bold\">\n          ?\n        </div>\n\n        {/* Back */}\n        <div className=\"absolute inset-0 bg-white rounded-xl flex items-center justify-center backface-hidden rotate-y-180 font-bold\">\n          {type}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AASe,SAAS,SAAS,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAiB;IACxE,qBACE,8WAAC;QACC,SAAS;QACT,WAAU;kBAEV,cAAA,8WAAC;YACC,WAAW,CAAC,qFAAqF,EAC/F,UAAU,iBAAiB,IAC3B;;8BAGF,8WAAC;oBAAI,WAAU;8BAAyH;;;;;;8BAKxI,8WAAC;oBAAI,WAAU;8BACZ;;;;;;;;;;;;;;;;;AAKX"}},
    {"offset": {"line": 1396, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/types/card.ts"],"sourcesContent":["export type CardType =\n  | \"swap\"\n  | \"x2\"\n  | \"x3\"\n  | \"+50\"\n  | \"+100\"\n  | \"+150\"\n  | \"-50\"\n  | \"-100\"\n  | \"-150\"\n  | \"loseAll\"\n  | \"steal20\"\n  | \"steal50\";\n\nexport interface CardConfig {\n  type: CardType;\n  weight: number;\n  desc: string;\n}\n\n/**\n * Pool bài – dùng cho random theo weight\n */\nexport const CARD_POOL: CardConfig[] = [\n  { type: \"+50\", weight: 30, desc: \"Cộng thêm 50 điểm.\" },\n  { type: \"+100\", weight: 20, desc: \"Cộng thêm 100 điểm.\" },\n  { type: \"+150\", weight: 10, desc: \"Cộng thêm 150 điểm.\" },\n\n  { type: \"-50\", weight: 15, desc: \"Trừ 50 điểm.\" },\n  { type: \"-100\", weight: 8, desc: \"Trừ 100 điểm.\" },\n  { type: \"-150\", weight: 4, desc: \"Trừ 150 điểm.\" },\n\n  { type: \"x2\", weight: 15, desc: \"Nhân đôi điểm vừa nhận.\" },\n  { type: \"x3\", weight: 4, desc: \"Nhân ba điểm vừa nhận.\" },\n\n  {\n    type: \"steal20\",\n    weight: 8,\n    desc: \"Cướp 20% tổng điểm của một người chơi khác.\",\n  },\n  {\n    type: \"steal50\",\n    weight: 2,\n    desc: \"Cướp 50% tổng điểm của một người chơi khác.\",\n  },\n\n  {\n    type: \"swap\",\n    weight: 5,\n    desc: \"Hoán đổi toàn bộ điểm với một người chơi khác.\",\n  },\n\n  {\n    type: \"loseAll\",\n    weight: 1,\n    desc: \"Mất toàn bộ điểm hiện tại.\",\n  },\n];\n"],"names":[],"mappings":";;;;AAuBO,MAAM,YAA0B;IACrC;QAAE,MAAM;QAAO,QAAQ;QAAI,MAAM;IAAqB;IACtD;QAAE,MAAM;QAAQ,QAAQ;QAAI,MAAM;IAAsB;IACxD;QAAE,MAAM;QAAQ,QAAQ;QAAI,MAAM;IAAsB;IAExD;QAAE,MAAM;QAAO,QAAQ;QAAI,MAAM;IAAe;IAChD;QAAE,MAAM;QAAQ,QAAQ;QAAG,MAAM;IAAgB;IACjD;QAAE,MAAM;QAAQ,QAAQ;QAAG,MAAM;IAAgB;IAEjD;QAAE,MAAM;QAAM,QAAQ;QAAI,MAAM;IAA0B;IAC1D;QAAE,MAAM;QAAM,QAAQ;QAAG,MAAM;IAAyB;IAExD;QACE,MAAM;QACN,QAAQ;QACR,MAAM;IACR;IACA;QACE,MAAM;QACN,QAAQ;QACR,MAAM;IACR;IAEA;QACE,MAAM;QACN,QAAQ;QACR,MAAM;IACR;IAEA;QACE,MAAM;QACN,QAAQ;QACR,MAAM;IACR;CACD"}},
    {"offset": {"line": 1466, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/utils/cardProbability.ts"],"sourcesContent":["import { CARD_POOL } from \"@/types/card\";\n\nconst totalWeight = CARD_POOL.reduce((s, c) => s + c.weight, 0);\n\nexport function getCardProbability(weight: number) {\n  return ((weight / totalWeight) * 100).toFixed(1);\n}\n\nexport function getCardRarity(weight: number) {\n  if (weight >= 20) return \"Thường\";\n  if (weight >= 8) return \"Ít gặp\";\n  if (weight >= 3) return \"Hiếm\";\n  return \"Cực hiếm\";\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,cAAc,0HAAS,CAAC,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,EAAE,MAAM,EAAE;AAEtD,SAAS,mBAAmB,MAAc;IAC/C,OAAO,CAAC,AAAC,SAAS,cAAe,GAAG,EAAE,OAAO,CAAC;AAChD;AAEO,SAAS,cAAc,MAAc;IAC1C,IAAI,UAAU,IAAI,OAAO;IACzB,IAAI,UAAU,GAAG,OAAO;IACxB,IAAI,UAAU,GAAG,OAAO;IACxB,OAAO;AACT"}},
    {"offset": {"line": 1488, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/components/card-rules-popup.tsx"],"sourcesContent":["\"use client\";\nimport GameCard from \"./game-card\";\nimport { X } from \"lucide-react\";\nimport { CARD_POOL } from \"@/types/card\";\nimport { getCardProbability, getCardRarity } from \"@/utils/cardProbability\";\n\nexport default function CardRulesPopup({\n  open,\n  onClose,\n}: {\n  open: boolean;\n  onClose: () => void;\n}) {\n  if (!open) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\n      <div className=\"bg-white p-4 rounded-xl max-w-6xl w-full relative\">\n        <button\n          className=\"absolute top-4 right-4 text-gray-500 hover:text-gray-900\"\n          onClick={onClose}\n        >\n          <X />\n        </button>\n\n        <h2 className=\"text-2xl font-bold mb-6\">🎴 Luật & Tỷ lệ Card</h2>\n\n        <div className=\"grid grid-cols-4 gap-6\">\n          {CARD_POOL.map((card) => (\n            <div\n              key={card.type}\n              className=\"flex flex-col items-center gap-2 border rounded-lg p-3\"\n            >\n              <GameCard type={card.type} flipped onClick={() => {}}/>\n\n              <p className=\"font-semibold\">{card.desc}</p>\n\n              <p className=\"text-sm text-gray-500\">\n                🎯 Tỷ lệ: {getCardProbability(card.weight)}%\n              </p>\n\n              <span className=\"text-xs px-2 py-1 rounded bg-gray-200\">\n                {getCardRarity(card.weight)}\n              </span>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AAJA;;;;;;AAMe,SAAS,eAAe,EACrC,IAAI,EACJ,OAAO,EAIR;IACC,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,8WAAC;QAAI,WAAU;kBACb,cAAA,8WAAC;YAAI,WAAU;;8BACb,8WAAC;oBACC,WAAU;oBACV,SAAS;8BAET,cAAA,8WAAC,qRAAC;;;;;;;;;;8BAGJ,8WAAC;oBAAG,WAAU;8BAA0B;;;;;;8BAExC,8WAAC;oBAAI,WAAU;8BACZ,0HAAS,CAAC,GAAG,CAAC,CAAC,qBACd,8WAAC;4BAEC,WAAU;;8CAEV,8WAAC,sIAAQ;oCAAC,MAAM,KAAK,IAAI;oCAAE,OAAO;oCAAC,SAAS,KAAO;;;;;;8CAEnD,8WAAC;oCAAE,WAAU;8CAAiB,KAAK,IAAI;;;;;;8CAEvC,8WAAC;oCAAE,WAAU;;wCAAwB;wCACxB,IAAA,8IAAkB,EAAC,KAAK,MAAM;wCAAE;;;;;;;8CAG7C,8WAAC;oCAAK,WAAU;8CACb,IAAA,yIAAa,EAAC,KAAK,MAAM;;;;;;;2BAZvB,KAAK,IAAI;;;;;;;;;;;;;;;;;;;;;AAoB5B"}},
    {"offset": {"line": 1600, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/utils/calculateScore.ts"],"sourcesContent":["export function calculateScore(isCorrect: boolean, timeLeft: number) {\n    if (!isCorrect) return 0;\n  \n    const baseScore = 100;\n    const maxBonus = 50;\n    const maxTime = 10;\n    const speedBonus = maxBonus * (timeLeft / maxTime) ** 2; \n  \n    return baseScore + Math.round(speedBonus);\n  }"],"names":[],"mappings":";;;;AAAO,SAAS,eAAe,SAAkB,EAAE,QAAgB;IAC/D,IAAI,CAAC,WAAW,OAAO;IAEvB,MAAM,YAAY;IAClB,MAAM,WAAW;IACjB,MAAM,UAAU;IAChB,MAAM,aAAa,WAAW,CAAC,WAAW,OAAO,KAAK;IAEtD,OAAO,YAAY,KAAK,KAAK,CAAC;AAChC"}},
    {"offset": {"line": 1616, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/utils/applyCardEffect.ts"],"sourcesContent":["import { CardType } from \"@/types/card\";\nimport { getPlayerScore, updateScore } from \"./firebase\";\n\ninterface ApplyCardParams {\n  roomCode: string;\n  playerId: string;\n  card: CardType;\n}\n\nexport async function applyCardEffect({\n  roomCode,\n  playerId,\n  card,\n}: ApplyCardParams) {\n  const score = await getPlayerScore(roomCode, playerId);\n  if (score === null) return;\n\n  let newScore = score;\n\n  switch (card) {\n    case \"+50\":\n      newScore += 50;\n      break;\n    case \"+100\":\n      newScore += 100;\n      break;\n    case \"+150\":\n      newScore += 150;\n      break;\n    case \"-50\":\n      newScore -= 50;\n      break;\n    case \"-100\":\n      newScore -= 100;\n      break;\n    case \"-150\":\n      newScore -= 150;\n      break;\n    case \"x2\":\n      newScore *= 2;\n      break;\n    case \"x3\":\n      newScore *= 3;\n      break;\n    case \"loseAll\":\n      newScore = 0;\n      break;\n\n    case \"steal20\":\n    case \"steal50\":\n    case \"swap\":\n      return;\n  }\n\n  await updateScore(roomCode, playerId, newScore);\n}\n"],"names":[],"mappings":";;;;AACA;;AAQO,eAAe,gBAAgB,EACpC,QAAQ,EACR,QAAQ,EACR,IAAI,EACY;IAChB,MAAM,QAAQ,MAAM,IAAA,mIAAc,EAAC,UAAU;IAC7C,IAAI,UAAU,MAAM;IAEpB,IAAI,WAAW;IAEf,OAAQ;QACN,KAAK;YACH,YAAY;YACZ;QACF,KAAK;YACH,YAAY;YACZ;QACF,KAAK;YACH,YAAY;YACZ;QACF,KAAK;YACH,YAAY;YACZ;QACF,KAAK;YACH,YAAY;YACZ;QACF,KAAK;YACH,YAAY;YACZ;QACF,KAAK;YACH,YAAY;YACZ;QACF,KAAK;YACH,YAAY;YACZ;QACF,KAAK;YACH,WAAW;YACX;QAEF,KAAK;QACL,KAAK;QACL,KAAK;YACH;IACJ;IAEA,MAAM,IAAA,gIAAW,EAAC,UAAU,UAAU;AACxC"}},
    {"offset": {"line": 1665, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/utils/randomCards.ts"],"sourcesContent":["import { CARD_POOL, CardType } from \"@/types/card\";\n\nfunction getRandomCard(): CardType {\n  const total = CARD_POOL.reduce((s, c) => s + c.weight, 0);\n  let rand = Math.random() * total;\n\n  for (const card of CARD_POOL) {\n    if (rand < card.weight) return card.type;\n    rand -= card.weight;\n  }\n\n  return \"+50\";\n}\n\nexport function randomCards(count: number): CardType[] {\n  const set = new Set<CardType>();\n  while (set.size < count) {\n    set.add(getRandomCard());\n  }\n  return [...set];\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,SAAS;IACP,MAAM,QAAQ,0HAAS,CAAC,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,EAAE,MAAM,EAAE;IACvD,IAAI,OAAO,KAAK,MAAM,KAAK;IAE3B,KAAK,MAAM,QAAQ,0HAAS,CAAE;QAC5B,IAAI,OAAO,KAAK,MAAM,EAAE,OAAO,KAAK,IAAI;QACxC,QAAQ,KAAK,MAAM;IACrB;IAEA,OAAO;AACT;AAEO,SAAS,YAAY,KAAa;IACvC,MAAM,MAAM,IAAI;IAChB,MAAO,IAAI,IAAI,GAAG,MAAO;QACvB,IAAI,GAAG,CAAC;IACV;IACA,OAAO;WAAI;KAAI;AACjB"}},
    {"offset": {"line": 1693, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/components/game-play.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport GameCard from \"./game-card\";\nimport { CardType } from \"@/types/card\";\nimport { calculateScore } from \"@/utils/calculateScore\";\nimport { applyCardEffect } from \"@/utils/applyCardEffect\";\nimport { getPlayerScore, updateScore } from \"@/utils/firebase\";\nimport { randomCards } from \"@/utils/randomCards\";\n\ntype Phase = \"question\" | \"card\";\n\ninterface Question {\n  question: string;\n  options: string[];\n  answer: string;\n}\n\nconst QUESTIONS: Question[] = [\n  {\n    question: \"Đại hội IX của Đảng xác định mô hình kinh tế tổng quát là gì?\",\n    options: [\n      \"Kinh tế kế hoạch hóa tập trung\",\n      \"Kinh tế thị trường định hướng XHCN\",\n      \"Kinh tế thị trường hiện đại\",\n      \"Kinh tế nhiều thành phần\",\n    ],\n    answer: \"Kinh tế thị trường định hướng XHCN\",\n  },\n  {\n    question: \"Đại hội VIII xác định chiến lược nào?\",\n    options: [\n      \"Công nghiệp hóa – hiện đại hóa\",\n      \"Phát triển nông nghiệp\",\n      \"Mở cửa hội nhập\",\n      \"Kinh tế tri thức\",\n    ],\n    answer: \"Công nghiệp hóa – hiện đại hóa\",\n  },\n];\n\nfunction shuffle<T>(arr: T[]) {\n  return [...arr].sort(() => Math.random() - 0.5);\n}\n\nexport default function GamePlay({\n  playerId,\n  roomCode,\n}: {\n  playerId: string;\n  roomCode: string;\n}) {\n  /* ===== CORE STATE ===== */\n  const [phase, setPhase] = useState<Phase>(\"question\");\n  const [score, setScore] = useState(0);\n\n  /* ===== QUESTION ===== */\n  const [questions, setQuestions] = useState<Question[]>(shuffle(QUESTIONS));\n  const [currentIdx, setCurrentIdx] = useState(0);\n  const currentQuestion = questions[currentIdx];\n\n  const [selectedOption, setSelectedOption] = useState<string | null>(null);\n  const [timeLeft, setTimeLeft] = useState(15);\n\n  /* ===== CARD ===== */\n  const CARD_COUNT = 3;\n  const MAX_FLIP = 2;\n\n  const [cardOptions, setCardOptions] = useState<CardType[]>([]);\n  const [cardsFlipped, setCardsFlipped] = useState<boolean[]>(\n    Array(CARD_COUNT).fill(false)\n  );\n  const [cardFlipsLeft, setCardFlipsLeft] = useState(MAX_FLIP);\n\n  /* ===== TIMER ===== */\n  useEffect(() => {\n    if (phase !== \"question\" || selectedOption) return;\n\n    if (timeLeft <= 0) {\n      setSelectedOption(\"\");\n      setTimeout(nextQuestion, 800);\n      return;\n    }\n\n    const timer = setTimeout(() => setTimeLeft((v) => v - 1), 1000);\n    return () => clearTimeout(timer);\n  }, [timeLeft, phase, selectedOption]);\n\n  /* ===== ANSWER ===== */\n  const handleAnswer = (option: string) => {\n    if (selectedOption) return;\n\n    setSelectedOption(option);\n    const isCorrect = option === currentQuestion.answer;\n\n    if (!isCorrect) {\n      setTimeout(nextQuestion, 1200);\n      return;\n    }\n\n    const gained = calculateScore(true, timeLeft);\n    setScore((prev) => {\n      const updated = prev + gained;\n      updateScore(roomCode, playerId, updated);\n      return updated;\n    });\n\n    // Reset card phase\n    setCardOptions(randomCards(CARD_COUNT));\n    setCardsFlipped(Array(CARD_COUNT).fill(false));\n    setCardFlipsLeft(MAX_FLIP);\n    setPhase(\"card\");\n  };\n\n  /* ===== CARD CLICK ===== */\n  const handleCardClick = async (idx: number) => {\n    if (cardsFlipped[idx] || cardFlipsLeft <= 0) return;\n\n    setCardsFlipped((prev) =>\n      prev.map((v, i) => (i === idx ? true : v))\n    );\n    setCardFlipsLeft((v) => v - 1);\n\n    await applyCardEffect({\n      roomCode,\n      playerId,\n      card: cardOptions[idx],\n    });\n\n    const updatedScore = await getPlayerScore(roomCode, playerId);\n    if (updatedScore !== null) setScore(updatedScore);\n\n    if (cardFlipsLeft - 1 <= 0) {\n      setTimeout(nextQuestion, 900);\n    }\n  };\n\n  /* ===== NEXT QUESTION ===== */\n  const nextQuestion = () => {\n    setSelectedOption(null);\n    setPhase(\"question\");\n    setTimeLeft(15);\n    setCardOptions([]);\n\n    if (currentIdx + 1 < questions.length) {\n      setCurrentIdx((v) => v + 1);\n    } else {\n      setQuestions(shuffle(QUESTIONS));\n      setCurrentIdx(0);\n    }\n  };\n\n  return (\n    <div className=\"mx-auto max-w-2xl space-y-6 text-center\">\n      <p className=\"text-xl font-bold\">Điểm: {score}</p>\n\n      {/* ===== QUESTION PHASE ===== */}\n      {phase === \"question\" && (\n        <div className=\"p-6 border rounded-xl bg-white shadow\">\n          <h2 className=\"text-xl font-semibold mb-2\">\n            {currentQuestion.question}\n          </h2>\n          <p className=\"text-sm text-gray-500 mb-4\">\n            Thời gian còn lại: {timeLeft}s\n          </p>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            {currentQuestion.options.map((opt) => {\n              const isCorrect = opt === currentQuestion.answer;\n              let style = \"bg-gray-100\";\n\n              if (selectedOption) {\n                if (opt === selectedOption) {\n                  style = isCorrect\n                    ? \"bg-green-500 text-white\"\n                    : \"bg-red-500 text-white\";\n                } else if (isCorrect) {\n                  style = \"bg-green-500 text-white\";\n                }\n              }\n\n              return (\n                <button\n                  key={opt}\n                  className={`p-3 rounded font-medium ${style}`}\n                  onClick={() => handleAnswer(opt)}\n                  disabled={!!selectedOption}\n                >\n                  {opt}\n                </button>\n              );\n            })}\n          </div>\n        </div>\n      )}\n\n      {/* ===== CARD PHASE ===== */}\n      {phase === \"card\" && (\n        <div className=\"space-y-4\">\n          <h2 className=\"text-xl font-bold\">🎴 Chọn bài</h2>\n\n          <div className=\"flex justify-center gap-6\">\n            {cardOptions.map((type, idx) => (\n              <GameCard\n                key={idx}\n                type={type}\n                flipped={cardsFlipped[idx]}\n                onClick={() => handleCardClick(idx)}\n              />\n            ))}\n          </div>\n\n          <p className=\"text-sm text-gray-500\">\n            Lượt lật còn lại: {cardFlipsLeft}\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1939, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/components/leaderboard.tsx"],"sourcesContent":["\"use client\";\n\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"./ui/card\";\nimport { cn } from \"@/lib/utils\";\n\ntype Player = {\n  id?: string;\n  name: string;\n  score: number;\n};\n\nexport function Leaderboard({\n  players,\n  currentPlayerId,\n}: {\n  players: Player[];\n  currentPlayerId?: string | null;\n}) {\n  // sort theo điểm\n  const sorted = [...players].sort((a, b) => b.score - a.score);\n\n  // tính rank (xử lý đồng hạng)\n  let lastScore: number | null = null;\n  let lastRank = 0;\n\n  const ranked = sorted.map((p, index) => {\n    const rank =\n      p.score === lastScore ? lastRank : index + 1;\n\n    lastScore = p.score;\n    lastRank = rank;\n\n    return { ...p, rank };\n  });\n\n  return (\n    <Card className=\"border-2 border-primary/20 shadow-xl\">\n      <CardHeader>\n        <CardTitle>Bảng xếp hạng</CardTitle>\n      </CardHeader>\n\n      <CardContent className=\"space-y-2 max-h-96 overflow-y-auto\">\n        <AnimatePresence>\n          {ranked.map((p) => {\n            const isMe = p.id === currentPlayerId;\n\n            return (\n              <motion.div\n                key={p.id || p.name}\n                layout\n                initial={{ opacity: 0, y: 10 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0 }}\n                transition={{ type: \"spring\", stiffness: 300, damping: 25 }}\n                className={cn(\n                  \"flex justify-between items-center px-4 py-2 rounded\",\n                  \"bg-muted/30\",\n                  isMe &&\n                    \"bg-primary/20 border border-primary shadow-md\"\n                )}\n              >\n                <span className=\"font-medium\">\n                  #{p.rank} {p.name}\n                  {isMe && \" (Bạn)\"}\n                </span>\n                <span className=\"font-bold\">\n                  {p.score} điểm\n                </span>\n              </motion.div>\n            );\n          })}\n        </AnimatePresence>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AAJA;;;;;AAYO,SAAS,YAAY,EAC1B,OAAO,EACP,eAAe,EAIhB;IACC,iBAAiB;IACjB,MAAM,SAAS;WAAI;KAAQ,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,KAAK,GAAG,EAAE,KAAK;IAE5D,8BAA8B;IAC9B,IAAI,YAA2B;IAC/B,IAAI,WAAW;IAEf,MAAM,SAAS,OAAO,GAAG,CAAC,CAAC,GAAG;QAC5B,MAAM,OACJ,EAAE,KAAK,KAAK,YAAY,WAAW,QAAQ;QAE7C,YAAY,EAAE,KAAK;QACnB,WAAW;QAEX,OAAO;YAAE,GAAG,CAAC;YAAE;QAAK;IACtB;IAEA,qBACE,8WAAC,iIAAI;QAAC,WAAU;;0BACd,8WAAC,uIAAU;0BACT,cAAA,8WAAC,sIAAS;8BAAC;;;;;;;;;;;0BAGb,8WAAC,wIAAW;gBAAC,WAAU;0BACrB,cAAA,8WAAC,kTAAe;8BACb,OAAO,GAAG,CAAC,CAAC;wBACX,MAAM,OAAO,EAAE,EAAE,KAAK;wBAEtB,qBACE,8WAAC,0SAAM,CAAC,GAAG;4BAET,MAAM;4BACN,SAAS;gCAAE,SAAS;gCAAG,GAAG;4BAAG;4BAC7B,SAAS;gCAAE,SAAS;gCAAG,GAAG;4BAAE;4BAC5B,MAAM;gCAAE,SAAS;4BAAE;4BACnB,YAAY;gCAAE,MAAM;gCAAU,WAAW;gCAAK,SAAS;4BAAG;4BAC1D,WAAW,IAAA,kHAAE,EACX,uDACA,eACA,QACE;;8CAGJ,8WAAC;oCAAK,WAAU;;wCAAc;wCAC1B,EAAE,IAAI;wCAAC;wCAAE,EAAE,IAAI;wCAChB,QAAQ;;;;;;;8CAEX,8WAAC;oCAAK,WAAU;;wCACb,EAAE,KAAK;wCAAC;;;;;;;;2BAlBN,EAAE,EAAE,IAAI,EAAE,IAAI;;;;;oBAsBzB;;;;;;;;;;;;;;;;;AAKV"}},
    {"offset": {"line": 2064, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/components/game.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Gamepad2, Users, Clock, CheckCircle, Info } from \"lucide-react\";\nimport {\n  createRoom,\n  joinRoom,\n  onLeaderboardUpdate,\n  closeRoom,\n  startGame,\n  onRoomStatusUpdate,\n  getRoomStatus,\n  endGame\n} from \"@/utils/firebase\";\nimport CardRulesPopup from \"./card-rules-popup\";\nimport GamePlay from \"./game-play\";\nimport { Leaderboard } from \"./leaderboard\";\n\nexport function Game() {\n  const [roomCode, setRoomCode] = useState(\"\");\n  const [playerName, setPlayerName] = useState(\"\");\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [joinedPlayers, setJoinedPlayers] = useState<{ name: string; score: number }[]>([]);\n  const [showCardRules, setShowCardRules] = useState(false);\n  const [playerId, setPlayerId] = useState<string | null>(null);\n  const [gameStarted, setGameStarted] = useState(false);\n  const [roomClosed, setRoomClosed] = useState(false);\n\n  // check admin\n  useEffect(() => {\n    const adminKey = localStorage.getItem(\"ADMIN_KEY\");\n    if (adminKey === \"BO_MAY_LA_ADMIN\") setIsAdmin(true);\n  }, []);\n\n  // realtime listeners\n  useEffect(() => {\n    if (!roomCode) return;\n\n    const unsubscribeLeaderboard = onLeaderboardUpdate(roomCode, (players) => setJoinedPlayers(players));\n    const unsubscribeRoomStatus = onRoomStatusUpdate(roomCode, ({ status, gameStarted }) => {\n      setRoomClosed(status === \"closed\");\n      setGameStarted(gameStarted);\n    });\n\n    return () => {\n      unsubscribeLeaderboard?.();\n      unsubscribeRoomStatus?.();\n    };\n  }, [roomCode]);\n\n  // --- Admin actions ---\n  const handleCreateRoom = async () => {\n    const { roomCode } = await createRoom();\n    setRoomCode(roomCode);\n    setGameStarted(false);\n    setRoomClosed(false);\n    onLeaderboardUpdate(roomCode, (players) => setJoinedPlayers(players));\n  };\n\n  const handleStartGame = async () => {\n    if (!roomCode) return;\n    await startGame(roomCode);\n  };\n\n  const handleCloseRoom = async () => {\n    if (!roomCode) return;\n    await closeRoom(roomCode);\n    setRoomClosed(true);\n  };\n\n  const handleEndGame = async () => {\n    if (!roomCode) return;\n    await endGame(roomCode);\n    setRoomClosed(true);\n    setGameStarted(false);\n  };\n\n  // --- Player actions ---\n  const handleJoinRoom = async () => {\n    if (!roomCode || !playerName.trim()) return;\n\n    const status = await getRoomStatus(roomCode);\n    if (!status || status.status === \"closed\") {\n      alert(\"Phòng này đã bị đóng, không thể tham gia.\");\n      return;\n    }\n\n    const id = await joinRoom(roomCode, playerName.trim());\n    setPlayerId(id);\n\n    onLeaderboardUpdate(roomCode, (players) => setJoinedPlayers(players));\n    onRoomStatusUpdate(roomCode, ({ status, gameStarted }) => {\n      setRoomClosed(status === \"closed\");\n      setGameStarted(gameStarted);\n    });\n  };\n\n  return (\n    <div className=\"mx-auto max-w-2xl space-y-8\">\n      {/* === Admin UI === */}\n      {isAdmin ? (\n        <>\n          {gameStarted ? (\n            <>\n              <div className=\"flex justify-center gap-2\">\n                <Button onClick={handleCreateRoom}>Tạo phòng mới</Button>\n                {roomCode && !roomClosed && <Button onClick={handleStartGame}>Bắt đầu</Button>}\n                {roomCode && !roomClosed && gameStarted && (\n                  <Button onClick={handleEndGame} variant=\"destructive\">\n                    Kết thúc trò chơi\n                  </Button>\n                )}\n              </div>\n              {roomCode && <p className=\"mt-2 text-lg font-semibold\">Mã phòng: {roomCode}</p>}\n              <Leaderboard players={joinedPlayers} />\n            </>\n          ) : (\n            <Card className=\"border-2 border-primary/20 shadow-xl\">\n              <CardHeader className=\"text-center\">\n                <div className=\"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary/10\">\n                  <Gamepad2 className=\"h-8 w-8 text-primary\" />\n                </div>\n                <CardTitle className=\"text-2xl\">Giao diện Admin</CardTitle>\n                <CardDescription>Tạo phòng và theo dõi người chơi tham gia</CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4 text-center\">\n                <div className=\"flex justify-center gap-2\">\n                  <Button onClick={handleCreateRoom}>Tạo phòng mới</Button>\n                  {roomCode && !roomClosed && <Button onClick={handleStartGame}>Bắt đầu</Button>}\n                  {roomCode && !roomClosed && (\n                    <Button onClick={handleCloseRoom} variant=\"destructive\">\n                      Đóng phòng\n                    </Button>\n                  )}\n                </div>\n                {roomCode && <p className=\"mt-2 text-lg font-semibold\">Mã phòng: {roomCode}</p>}\n                {joinedPlayers.length > 0 && (\n                  <div className=\"mt-4 space-y-2 border p-2 rounded\">\n                    <p className=\"font-medium mb-2\">Danh sách người tham gia:</p>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {joinedPlayers.map((p, idx) => (\n                        <span\n                          key={idx}\n                          className=\"inline-flex items-center gap-1 bg-primary/20 dark:bg-primary/30 text-primary px-3 py-1 rounded-full text-sm font-medium\"\n                        >\n                          {p.name}\n                          {gameStarted && <span className=\"ml-1 text-xs font-normal\">({p.score} điểm)</span>}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                {roomClosed && <p className=\"mt-2 text-red-600 font-semibold\">Phòng đã bị đóng</p>}\n              </CardContent>\n            </Card>\n          )}\n        </>\n      ) : (\n        <>\n          {/* === Player UI === */}\n          {!playerId && (\n            <Card className=\"border-2 border-primary/20 shadow-xl\">\n              <CardHeader className=\"text-center\">\n                <div className=\"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary/10\">\n                  <Gamepad2 className=\"h-8 w-8 text-primary\" />\n                </div>\n                <CardTitle className=\"text-2xl\">Tham gia trò chơi</CardTitle>\n                <CardDescription>Nhập mã phòng để tham gia cùng bạn bè</CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex gap-3\">\n                  <Input placeholder=\"Tên của bạn\" value={playerName} onChange={(e) => setPlayerName(e.target.value)} />\n                  <Input\n                    placeholder=\"Nhập mã phòng...\"\n                    value={roomCode}\n                    onChange={(e) => setRoomCode(e.target.value.toUpperCase())}\n                    className=\"text-center text-lg font-semibold tracking-widest\"\n                    maxLength={6}\n                  />\n                  <Button onClick={handleJoinRoom}>Tham gia</Button>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {playerId && (\n            <>\n              {gameStarted ? (\n                <GamePlay playerId={playerId} roomCode={roomCode} />\n              ) : (\n                <Card className=\"border-2 border-primary/20 shadow-xl\">\n                  <CardHeader>\n                    <CardTitle>Phòng: {roomCode}</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-2 max-h-64 overflow-y-auto border p-2 rounded\">\n                    {joinedPlayers.length > 0 && (\n                      <div className=\"mt-4 space-y-2 border p-2 rounded\">\n                        <p className=\"font-medium mb-2\">Danh sách người tham gia:</p>\n                        <div className=\"flex flex-wrap gap-2\">\n                          {joinedPlayers.map((p, idx) => (\n                            <span\n                              key={idx}\n                              className=\"inline-flex items-center gap-1 bg-primary/20 dark:bg-primary/30 text-primary px-3 py-1 rounded-full text-sm font-medium\"\n                            >\n                              {p.name}\n                              {gameStarted && <span className=\"ml-1 text-xs font-normal\">({p.score} điểm)</span>}\n                            </span>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                    {(roomClosed || !gameStarted) && (\n                      <p className={`mt-2 font-semibold ${roomClosed ? \"text-red-600\" : \"text-sm text-muted-foreground\"}`}>\n                        {roomClosed ? \"Phòng đã bị đóng\" : \"Chờ admin bắt đầu...\"}\n                      </p>\n                    )}\n                  </CardContent>\n                </Card>\n              )}\n            </>\n          )}\n        </>\n      )}\n\n      {/* === Luật chơi === */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Info className=\"h-5 w-5 text-primary\" />\n            Luật chơi\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {/* Thời gian */}\n          <div className=\"flex gap-3 rounded-lg bg-muted/50 p-4\">\n            <Clock className=\"h-5 w-5 shrink-0 text-primary\" />\n            <div>\n              <p className=\"font-medium\">Thời gian</p>\n              <p className=\"text-sm text-muted-foreground\">15 giây cho mỗi câu hỏi</p>\n              <p className=\"text-sm text-muted-foreground\">\n                Dự kiến trò chơi sẽ diễn ra trong 8 phút, trò chơi sẽ kết thúc khi admin đóng phòng\n              </p>\n            </div>\n          </div>\n\n          {/* Nội dung trả lời */}\n          <div className=\"flex gap-3\">\n            <CheckCircle className=\"h-5 w-5 shrink-0 text-emerald-500\" />\n            <p className=\"text-sm\">Trả lời các câu hỏi về lịch sử Việt Nam từ Đại hội VIII đến nay</p>\n          </div>\n\n          {/* Cơ chế bốc bài */}\n          <div className=\"flex gap-3\">\n            <CheckCircle className=\"h-5 w-5 shrink-0 text-emerald-500\" />\n            <div className=\"text-sm\">\n              Cơ chế bốc bài:\n              <ul className=\"list-disc ml-5\">\n                <li>Mỗi lần trả lời đúng, bạn được điểm dựa trên thời gian trả lời nhanh/chậm.</li>\n                <li>Sau đó, bạn được bốc <strong>2 lá card</strong> từ bộ bài (có thể bỏ qua nếu không muốn bốc thêm).</li>\n                <li>Mỗi lá card sẽ ảnh hưởng trực tiếp đến điểm số của bạn hoặc đối thủ (nhân điểm, cộng/trừ điểm, cướp điểm, mất toàn bộ…)</li>\n                <li>Nếu trả lời sai, bạn không được điểm và có thể chuyển sang câu hỏi tiếp theo.</li>\n              </ul>\n            </div>\n          </div>\n\n          <Button className=\"mt-2\" onClick={() => setShowCardRules(true)}>\n            Xem luật các loại card\n          </Button>\n        </CardContent>\n      </Card>\n\n      <CardRulesPopup open={showCardRules} onClose={() => setShowCardRules(false)} />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAUA;AACA;AACA;AAnBA;;;;;;;;;;;AAqBO,SAAS;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iVAAQ,EAAC;IACzC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iVAAQ,EAAC;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iVAAQ,EAAC;IACvC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iVAAQ,EAAoC,EAAE;IACxF,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iVAAQ,EAAC;IACnD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iVAAQ,EAAgB;IACxD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iVAAQ,EAAC;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iVAAQ,EAAC;IAE7C,cAAc;IACd,IAAA,kVAAS,EAAC;QACR,MAAM,WAAW,aAAa,OAAO,CAAC;QACtC,IAAI,aAAa,mBAAmB,WAAW;IACjD,GAAG,EAAE;IAEL,qBAAqB;IACrB,IAAA,kVAAS,EAAC;QACR,IAAI,CAAC,UAAU;QAEf,MAAM,yBAAyB,IAAA,wIAAmB,EAAC,UAAU,CAAC,UAAY,iBAAiB;QAC3F,MAAM,wBAAwB,IAAA,uIAAkB,EAAC,UAAU,CAAC,EAAE,MAAM,EAAE,WAAW,EAAE;YACjF,cAAc,WAAW;YACzB,eAAe;QACjB;QAEA,OAAO;YACL;YACA;QACF;IACF,GAAG;QAAC;KAAS;IAEb,wBAAwB;IACxB,MAAM,mBAAmB;QACvB,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAA,+HAAU;QACrC,YAAY;QACZ,eAAe;QACf,cAAc;QACd,IAAA,wIAAmB,EAAC,UAAU,CAAC,UAAY,iBAAiB;IAC9D;IAEA,MAAM,kBAAkB;QACtB,IAAI,CAAC,UAAU;QACf,MAAM,IAAA,8HAAS,EAAC;IAClB;IAEA,MAAM,kBAAkB;QACtB,IAAI,CAAC,UAAU;QACf,MAAM,IAAA,8HAAS,EAAC;QAChB,cAAc;IAChB;IAEA,MAAM,gBAAgB;QACpB,IAAI,CAAC,UAAU;QACf,MAAM,IAAA,4HAAO,EAAC;QACd,cAAc;QACd,eAAe;IACjB;IAEA,yBAAyB;IACzB,MAAM,iBAAiB;QACrB,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,IAAI;QAErC,MAAM,SAAS,MAAM,IAAA,kIAAa,EAAC;QACnC,IAAI,CAAC,UAAU,OAAO,MAAM,KAAK,UAAU;YACzC,MAAM;YACN;QACF;QAEA,MAAM,KAAK,MAAM,IAAA,6HAAQ,EAAC,UAAU,WAAW,IAAI;QACnD,YAAY;QAEZ,IAAA,wIAAmB,EAAC,UAAU,CAAC,UAAY,iBAAiB;QAC5D,IAAA,uIAAkB,EAAC,UAAU,CAAC,EAAE,MAAM,EAAE,WAAW,EAAE;YACnD,cAAc,WAAW;YACzB,eAAe;QACjB;IACF;IAEA,qBACE,8WAAC;QAAI,WAAU;;YAEZ,wBACC;0BACG,4BACC;;sCACE,8WAAC;4BAAI,WAAU;;8CACb,8WAAC,qIAAM;oCAAC,SAAS;8CAAkB;;;;;;gCAClC,YAAY,CAAC,4BAAc,8WAAC,qIAAM;oCAAC,SAAS;8CAAiB;;;;;;gCAC7D,YAAY,CAAC,cAAc,6BAC1B,8WAAC,qIAAM;oCAAC,SAAS;oCAAe,SAAQ;8CAAc;;;;;;;;;;;;wBAKzD,0BAAY,8WAAC;4BAAE,WAAU;;gCAA6B;gCAAW;;;;;;;sCAClE,8WAAC,yIAAW;4BAAC,SAAS;;;;;;;iDAGxB,8WAAC,iIAAI;oBAAC,WAAU;;sCACd,8WAAC,uIAAU;4BAAC,WAAU;;8CACpB,8WAAC;oCAAI,WAAU;8CACb,cAAA,8WAAC,8SAAQ;wCAAC,WAAU;;;;;;;;;;;8CAEtB,8WAAC,sIAAS;oCAAC,WAAU;8CAAW;;;;;;8CAChC,8WAAC,4IAAe;8CAAC;;;;;;;;;;;;sCAEnB,8WAAC,wIAAW;4BAAC,WAAU;;8CACrB,8WAAC;oCAAI,WAAU;;sDACb,8WAAC,qIAAM;4CAAC,SAAS;sDAAkB;;;;;;wCAClC,YAAY,CAAC,4BAAc,8WAAC,qIAAM;4CAAC,SAAS;sDAAiB;;;;;;wCAC7D,YAAY,CAAC,4BACZ,8WAAC,qIAAM;4CAAC,SAAS;4CAAiB,SAAQ;sDAAc;;;;;;;;;;;;gCAK3D,0BAAY,8WAAC;oCAAE,WAAU;;wCAA6B;wCAAW;;;;;;;gCACjE,cAAc,MAAM,GAAG,mBACtB,8WAAC;oCAAI,WAAU;;sDACb,8WAAC;4CAAE,WAAU;sDAAmB;;;;;;sDAChC,8WAAC;4CAAI,WAAU;sDACZ,cAAc,GAAG,CAAC,CAAC,GAAG,oBACrB,8WAAC;oDAEC,WAAU;;wDAET,EAAE,IAAI;wDACN,6BAAe,8WAAC;4DAAK,WAAU;;gEAA2B;gEAAE,EAAE,KAAK;gEAAC;;;;;;;;mDAJhE;;;;;;;;;;;;;;;;gCAUd,4BAAc,8WAAC;oCAAE,WAAU;8CAAkC;;;;;;;;;;;;;;;;;;8CAMtE;;oBAEG,CAAC,0BACA,8WAAC,iIAAI;wBAAC,WAAU;;0CACd,8WAAC,uIAAU;gCAAC,WAAU;;kDACpB,8WAAC;wCAAI,WAAU;kDACb,cAAA,8WAAC,8SAAQ;4CAAC,WAAU;;;;;;;;;;;kDAEtB,8WAAC,sIAAS;wCAAC,WAAU;kDAAW;;;;;;kDAChC,8WAAC,4IAAe;kDAAC;;;;;;;;;;;;0CAEnB,8WAAC,wIAAW;gCAAC,WAAU;0CACrB,cAAA,8WAAC;oCAAI,WAAU;;sDACb,8WAAC,mIAAK;4CAAC,aAAY;4CAAc,OAAO;4CAAY,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;;;;;;sDACjG,8WAAC,mIAAK;4CACJ,aAAY;4CACZ,OAAO;4CACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK,CAAC,WAAW;4CACvD,WAAU;4CACV,WAAW;;;;;;sDAEb,8WAAC,qIAAM;4CAAC,SAAS;sDAAgB;;;;;;;;;;;;;;;;;;;;;;;oBAMxC,0BACC;kCACG,4BACC,8WAAC,sIAAQ;4BAAC,UAAU;4BAAU,UAAU;;;;;iDAExC,8WAAC,iIAAI;4BAAC,WAAU;;8CACd,8WAAC,uIAAU;8CACT,cAAA,8WAAC,sIAAS;;4CAAC;4CAAQ;;;;;;;;;;;;8CAErB,8WAAC,wIAAW;oCAAC,WAAU;;wCACpB,cAAc,MAAM,GAAG,mBACtB,8WAAC;4CAAI,WAAU;;8DACb,8WAAC;oDAAE,WAAU;8DAAmB;;;;;;8DAChC,8WAAC;oDAAI,WAAU;8DACZ,cAAc,GAAG,CAAC,CAAC,GAAG,oBACrB,8WAAC;4DAEC,WAAU;;gEAET,EAAE,IAAI;gEACN,6BAAe,8WAAC;oEAAK,WAAU;;wEAA2B;wEAAE,EAAE,KAAK;wEAAC;;;;;;;;2DAJhE;;;;;;;;;;;;;;;;wCAUd,CAAC,cAAc,CAAC,WAAW,mBAC1B,8WAAC;4CAAE,WAAW,CAAC,mBAAmB,EAAE,aAAa,iBAAiB,iCAAiC;sDAChG,aAAa,qBAAqB;;;;;;;;;;;;;;;;;;;;;0BAYrD,8WAAC,iIAAI;;kCACH,8WAAC,uIAAU;kCACT,cAAA,8WAAC,sIAAS;4BAAC,WAAU;;8CACnB,8WAAC,8RAAI;oCAAC,WAAU;;;;;;gCAAyB;;;;;;;;;;;;kCAI7C,8WAAC,wIAAW;wBAAC,WAAU;;0CAErB,8WAAC;gCAAI,WAAU;;kDACb,8WAAC,iSAAK;wCAAC,WAAU;;;;;;kDACjB,8WAAC;;0DACC,8WAAC;gDAAE,WAAU;0DAAc;;;;;;0DAC3B,8WAAC;gDAAE,WAAU;0DAAgC;;;;;;0DAC7C,8WAAC;gDAAE,WAAU;0DAAgC;;;;;;;;;;;;;;;;;;0CAOjD,8WAAC;gCAAI,WAAU;;kDACb,8WAAC,8TAAW;wCAAC,WAAU;;;;;;kDACvB,8WAAC;wCAAE,WAAU;kDAAU;;;;;;;;;;;;0CAIzB,8WAAC;gCAAI,WAAU;;kDACb,8WAAC,8TAAW;wCAAC,WAAU;;;;;;kDACvB,8WAAC;wCAAI,WAAU;;4CAAU;0DAEvB,8WAAC;gDAAG,WAAU;;kEACZ,8WAAC;kEAAG;;;;;;kEACJ,8WAAC;;4DAAG;0EAAqB,8WAAC;0EAAO;;;;;;4DAAkB;;;;;;;kEACnD,8WAAC;kEAAG;;;;;;kEACJ,8WAAC;kEAAG;;;;;;;;;;;;;;;;;;;;;;;;0CAKV,8WAAC,qIAAM;gCAAC,WAAU;gCAAO,SAAS,IAAM,iBAAiB;0CAAO;;;;;;;;;;;;;;;;;;0BAMpE,8WAAC,gJAAc;gBAAC,MAAM;gBAAe,SAAS,IAAM,iBAAiB;;;;;;;;;;;;AAG3E"}},
    {"offset": {"line": 2779, "column": 0}, "map": {"version":3,"sources":["file:///D:/DAI_HOC/Sang/Semester9/vnr/vnr202/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Home } from \"@/components/home\"\nimport { Header } from \"@/components/header\"\nimport { Game } from \"@/components/game\"\n\nexport default function Page() {\n  const [activeTab, setActiveTab] = useState<\"home\" | \"game\">(\"home\")\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header activeTab={activeTab} setActiveTab={setActiveTab} />\n      <main className=\"container mx-auto px-2 py-8\">{activeTab === \"home\" ? <Home /> : <Game />}</main>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iVAAQ,EAAkB;IAE5D,qBACE,8WAAC;QAAI,WAAU;;0BACb,8WAAC,+HAAM;gBAAC,WAAW;gBAAW,cAAc;;;;;;0BAC5C,8WAAC;gBAAK,WAAU;0BAA+B,cAAc,uBAAS,8WAAC,2HAAI;;;;yCAAM,8WAAC,2HAAI;;;;;;;;;;;;;;;;AAG5F"}}]
}